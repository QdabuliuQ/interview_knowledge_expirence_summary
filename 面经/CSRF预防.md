CSRF预防

什么是`CSRF`攻击，`CSRF`攻击全称：跨站请求伪造攻击，指的是攻击者诱导用户进入一个第三方网站，然后该网站向被攻击网站发起请求，如果用户在被攻击网站中处于登录状态，那么攻击者可以利用这个登陆状态，冒充用户向被攻击网站执行某些操作。`CSRF`本质上是利用`cookie`可会在同源请求中被携带发送给服务器的特点，从而来冒充用户

预防主要是三种方法：
1.验证`http`的请求头的`origin / referer`字段，判断是否是允许请求的域，但这种方法存在缺陷，当对`http`的请求头进行判断的时候，容易将搜索引擎的页面请求一并过滤，不利于`SEO`；而且`referer`存在被伪造的风险。
2.`token`验证，服务器生成一个随机`token`返回给用户，后续用户需要将`token`作为请求参数传递给服务器，服务器建立拦截器验证`token`，如果请求中的`token`不存在或者不正确，则可认为是一个`CSRF`攻击
3.`cookie`双层认证，服务器向请求域名注入`cookie`，后续发送请求的时候，从`cookie`中取出这个字符串添加到`url`中，攻击者只能利用`cookie`进行请求，但无法获取到`cookie`
4.设置`cookie`为`samesite`，这样可以限制`cookie`不能够被第三方所使用



