# 如何保证TCP / IP数据包传输的有序可靠

对字节流分段并进行编号，然后通过 **ACK 回复** 和 **超时重发** 这两个机制来保证

1. 为了保证数据包的可靠传递，发送方必须把已发送的数据包**保留在缓冲区**
2. 并为每一个已发送的数据包**创建超时定时器**
3. 如果在定时器超时之前收到对方发来的应答信息，则**释放该数据占用的缓冲区**
4. 如果定时器超时了，就重新发送数据包直到接收应答或者超过规定次数为止
5. 接收方接收到数据包后，会进行 **CRC 校验**，如果正确则把数据交给上层协议，然后**给发送方发送一个累计应答包**，表名数据已接收到；如果接收方也恰好有数据需要发送发送方，则可以将数据一起带过去