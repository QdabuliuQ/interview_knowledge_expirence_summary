# 闭包

闭包有两大作用：**保存 / 保护 私有变量**；

闭包简单来说就是一个函数内部，又定义了一个函数和一个变量，这个变量可以称之为私有变量，在内部的函数中使用了该私有变量，并且将内部的函数`return`出去；在外部可以使用到私有变量，但不能进行修改，也就印证 **保护 / 保存** 私有变量

```js
function count() {
  let num = 1  // 私有变量
  return function fun() {  // 闭包函数
    num ++
  }
}

let fn = count()  // 将闭包函数保存到fn
fn()  // 调用闭包函数  num值修改
fn()
fn()
num = 6  // 无法修改 闭包内部的变量
```

而且在`count`函数内部就是一个执行上下文，由于闭包函数使用到了私有变量，所以`count`函数上下文是不会被销毁，会一直存在，所以就有可能会导致**内存泄露**的问题

函数执行形成私有上下文，来保护和保存私有变量机制称为 **闭包**。

**闭包的特性**

1. 内部函数可以访问定义在它们外部函数的参数和变量，通过作用域链向上查找，把外层函数作用域中的变量值存储在内存中，函数调用结束并不会被销毁，同时也不会污染全局变量
2. 函数内部嵌套函数
3. 本质是函数内部与函数外部的联系，优点是可以读取函数内部的变量，让这些变量的值始终保存在内存中，不会在函数被调用之后自动清除

**闭包的形成条件**

1. 函数的嵌套
2. 内部函数引用了外部函数的局部变量，延长了外部函数变量的生命周期